Tìm hiểu về PX4
Ground Control Station là gì ? (tay cầm)(https://docs.qgroundcontrol.com/master/en/qgc-user-guide/)
- Đọc cả SIYI MK32
Trên drone thường sẽ có những bộ phận nào
Giao thức thường được sử dụng là gì? (MAVlink)
Để điều khiển drone cần những thông tin về dữ kiện gì ?
Drone có những kiểu điều khiển như thế nào  (throttle, yaw, pitch, ..)
Tìm hiểu xem Drone thường sử dụng những dải tần nào để điều khiển ?
Lợi ích, tác hại của những dải tần?
giao thức truyền video về ? (rtsp protocol)
tài liệu tham khảo
https://px4.io/software/software-overview/
nó được cộng đồng phát triển trên nền tảng chip STM32H7

- các bộ phận trên drone
+----------------------------------------------------+
|                Khung (Frame)                       |
|  |-- Động cơ + Cánh quạt --|                       |
|  |-- ESC (điều khiển động cơ)                      |
|  |-- Pin (Battery)                                 |
|  |-- Flight Controller (PX4, Pixhawk...)           |
|      |-- IMU (Gyro + Accel)                        |
|      |-- Compass                                   |
|      |-- Barometer                                 |
|  |-- GPS Module                                    |
|  |-- Telemetry Module + Anten                      |
|  |-- Camera + Gimbal (nếu có)                      |
|  |-- RC Receiver                                   |
|  |-- LED, Buzzer                                   |
|  |-- Cảm biến bổ sung (Lidar, Sonar, Optical Flow)

- trên drone thường có những bộ phận :
+
1. Joystick / Stick (Cần điều khiển)
2. Công tắc / Switch
3. Núm xoay / Potentiometer
4. Màn hình hiển thị
5. Ăng-ten (Antenna)
6. Cổng kết nối (USB, Trainer port, module mở rộng...)
7. Pin / Battery
8. Buzzer / Loa
9. Đèn LED trạng thái


- quy trình truyền tín hiệu lên drone PX4
Quy trình truyền tín hiệu lên drone PX4
Các bộ phận nhập liệu (joystick, switch, núm xoay) → Vi điều khiển tay cầm

Vi điều khiển đọc các giá trị và trạng thái, đóng gói thành bản tin điều khiển (theo giao thức: SBUS, CRSF, PPM...).
Vi điều khiển → Module RF → Ăng-ten phát sóng

Bản tin điều khiển được mã hóa và phát qua sóng RF tới drone.
Drone (receiver) → Giải mã tín hiệu → PX4 Flight Controller

Bộ thu tín hiệu trên drone nhận, giải mã, chuyển tới PX4.
PX4 xử lý lệnh

PX4 nhận lệnh, điều khiển động cơ, gimbal, camera, chế độ bay...
Telemetry (nếu có)

PX4 gửi thông tin trạng thái, vị trí, pin... về tay cầm, hiển thị trên màn hình, cảnh báo cho người dùng.
Ví dụ thực tế:

Khi bạn gạt joystick lên, vi điều khiển tay cầm chuyển thành kênh throttle, mã hóa và phát sóng RF. Drone nhận, PX4 tăng tốc động cơ để drone bay lên.
Khi bạn bật công tắc “Return to Home”, tay cầm gửi tín hiệu chế độ về PX4, PX4 tự động điều khiển drone bay về vị trí xuất phát.

- dải tần để điều khiển 
+ 900 MHz / 868 MHz
Dành cho các hệ thống điều khiển tầm xa (long range) như Crossfire, ELRS, R9M...
900 MHz thường dùng ở Mỹ; 868 MHz dùng ở châu Âu (theo quy định vùng).
Khoảng cách truyền: Có thể lên tới hàng chục km, xuyên vật cản tốt hơn 2.4 GHz.

- dải tần để truyền video live về
+ Truyền bằng tín hiệu radio (2.4 GHz) dải tần rộng phạm vi xa (module ELRS (ExpressLRS))
hạn chế của dải tần này là có độ trễ tín hiệu truyền sóng kém không ổn định bằng 5.8 GHZ
cho video chất lượng thấp tụt fps
* cách khắc phục có thể thay bằng sóng 5.8ghz để tín hiệu được ổn định
hạn chế của cách này là (đường truyền hẹp , phạm vi ngắn )

- thuật toán điều khiển drone 
+ PID :
2. PID được sử dụng ở đâu trong drone?
Điều khiển attitude (góc nghiêng: roll, pitch, yaw).
Giữ vị trí, độ cao (position, altitude).
Điều khiển tốc độ động cơ.

3. Nguyên lý hoạt động PID trong drone
Drone nhận lệnh (ví dụ: nghiêng sang trái, bay lên, quay đầu).
Cảm biến (IMU, gyro, accelerometer) đo trạng thái hiện tại (góc, vị trí, tốc độ).
PID controller so sánh trạng thái hiện tại với trạng thái mong muốn (setpoint).
Tính toán sai số (error = setpoint - actual value).
Ba thành phần PID xử lý sai số:
P (Proportional): Điều chỉnh nhanh theo sai số tức thời.
I (Integral): Bù trừ sai số tích lũy (lâu dài).
D (Derivative): Dự đoán và giảm rung lắc bằng cách xét tốc độ thay đổi sai số.
Kết quả PID là tín hiệu điều chỉnh gửi đến động cơ (ESC), giúp drone đạt trạng thái mong muốn.

+. Quaternion Attitude Control (Điều khiển tư thế bằng quaternion)
Được mô tả trong phần mô tả file và tài liệu tham khảo:
Nonlinear Quadrocopter Attitude Control (2013) by Dario Brescianini, Markus Hehn and Raffaello D'Andrea.
Thuật toán này sử dụng quaternion để điều khiển tư thế (attitude) của drone, giúp tránh các vấn đề về singularity (góc Euler).
Được triển khai trong hàm generate_attitude_setpoint và các hàm liên quan đến attitude control.

các giao tiếp trong drone tới bo mạch :
https://docs.px4.io/main/en/companion_computer/holybro_pixhawk_jetson_baseboard


sơ đồ điều khiển PX4 từ PID đến động cơ :
+------------------+
|  Rate Controller |   ← PID tính toán moment
| (Roll, Pitch, Yaw) |
+------------------+
          ↓
     torque_sp (Nm)   ← moment mong muốn
          ↓
+------------------+
|      Mixer       |   ← ánh xạ torque thành lực động cơ
+------------------+
          ↓
   motor_output (PWM) ← giá trị từ 1000 - 2000 µs
          ↓
+------------------+
|      ESC         |   ← chuyển PWM thành dòng điện
+------------------+
          ↓
+------------------+
|    Động cơ       |   ← tạo lực quay + lực nâng
+------------------+
